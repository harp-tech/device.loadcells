<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="clr-namespace:Harp.LoadCells.Design.Controls"
             xmlns:conv="clr-namespace:Harp.LoadCells.Design.Converters"
             xmlns:heroIcons="clr-namespace:HeroIconsAvalonia.Controls;assembly=HeroIconsAvalonia"
             xmlns:local="clr-namespace:Harp.LoadCells;assembly=Harp.LoadCells"
             xmlns:md="clr-namespace:Markdown.Avalonia;assembly=Markdown.Avalonia"
             xmlns:system="clr-namespace:System;assembly=System.Runtime"
             xmlns:vm="clr-namespace:Harp.LoadCells.Design.ViewModels"
             xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
             mc:Ignorable="d" d:DesignWidth="1500" d:DesignHeight="950"
             x:Class="Harp.LoadCells.Design.Views.LoadCellsView"
             x:DataType="vm:LoadCellsViewModel">

  <UserControl.Resources>
    <conv:EnableFlagConverter x:Key="EnableFlagConverter"/>
    <conv:PayloadFieldConverter x:Key="PayloadFieldConverter"/>
    <conv:VisualStatusColorConverter x:Key="VisualStatusColorConverter"/>
  </UserControl.Resources>

  <Design.DataContext>
    <!-- This only sets the DataContext for the previewer in an IDE,
         to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
    <vm:LoadCellsViewModel />
  </Design.DataContext>

  <DockPanel>
    <Grid Margin="10" DockPanel.Dock="Top"
          ColumnDefinitions="Auto, Auto, *, Auto, Auto"
          RowDefinitions="30,25,*,*">
      <TextBlock Grid.Row="0"
                 Text="LoadCells"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Bottom"
                 FontWeight="Bold"
                 FontSize="17" />
      <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Spacing="2">
        <TextBlock Text="{Binding AppVersion}"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Bottom"
                   FontWeight="Bold"
                   FontSize="17"
                   Margin="5,0,0,0" />
        <Button Background="Transparent" Command="{Binding ShowAboutCommand}">
          <heroIcons:HeroIcon Foreground="{Binding IconColor}" Type="QuestionMarkCircle" Width="14"/>
        </Button>
      </StackPanel>
      <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Text="Hardware &amp; Software Platform" HorizontalAlignment="Left"
                     Foreground="{StaticResource BlueAccentColor}" MaxWidth="240" VerticalAlignment="Center" FontWeight="Bold" TextWrapping="WrapWithOverflow" FontSize="12" />
      <ThemeVariantScope Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" Grid.ColumnSpan="2"
                               RequestedThemeVariant="Light">
        <Image VerticalAlignment="Center"
               HorizontalAlignment="Right"
               Margin="0,5,5,0"
               IsVisible="{Binding !IsDarkMode}"
               Source="/Assets/cf-logo.png" />
      </ThemeVariantScope>
      <ThemeVariantScope Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" Grid.ColumnSpan="2"
                         RequestedThemeVariant="Dark">
        <Image VerticalAlignment="Center"
               HorizontalAlignment="Right"
               Margin="0,5,5,0"
               IsVisible="{Binding IsDarkMode}"
               Source="/Assets/cf-logo-white-lettering.png" />
      </ThemeVariantScope>
      <ToggleSwitch Grid.Row="0" Grid.Column="4" Grid.RowSpan="2" Margin="10,0,0,0" ToolTip.Tip="Change theme"
                          Content="Theme" FontWeight="Normal" FontSize="14"
                          IsChecked="{Binding IsDarkMode}">
        <ToggleSwitch.OnContent>
          <heroIcons:HeroIcon Foreground="{Binding IconColor}" Type="Moon" Width="16" Height="16" />
        </ToggleSwitch.OnContent>
        <ToggleSwitch.OffContent>
          <heroIcons:HeroIcon Foreground="{Binding IconColor}" Type="Sun" Width="16" Height="16" />
        </ToggleSwitch.OffContent>
      </ToggleSwitch>
    </Grid>

    <Grid DockPanel.Dock="Bottom" RowDefinitions="Auto" ColumnDefinitions="Auto,*,Auto,Auto" Margin="10">
      <Button Grid.Row="0" Grid.Column="3"
              Command="{Binding SaveConfigurationCommand}"
              Content="Save configuration"
              Margin="10,0,0,0"
              Background="{StaticResource BlueAccentColor}"
              Foreground="White">
        <Button.CommandParameter>
          <system:Boolean>false</system:Boolean>
        </Button.CommandParameter>
      </Button>
      <Button Grid.Row="0" Grid.Column="2" Command="{Binding SaveConfigurationCommand}"
              Content="Save configuration permanently">
        <Button.CommandParameter>
          <system:Boolean>true</system:Boolean>
        </Button.CommandParameter>
      </Button>
      <Button Grid.Row="0" Grid.Column="0" Command="{Binding ResetConfigurationCommand}"
              Content="Reset to defaults" />
    </Grid>

    <ScrollViewer HorizontalScrollBarVisibility="Auto" Padding="0">
      <StackPanel Spacing="12" Margin="0,20,0,0">
        <Panel Height="28">
          <TextBlock Text="Device connection" VerticalAlignment="Center" FontSize="20" FontWeight="SemiBold"
                     Margin="10,0" />
        </Panel>
        <Grid ColumnDefinitions="*,*,*,*,*" RowDefinitions="*,*" Margin="0,0,50,0" MinHeight="60">
          <StackPanel Grid.RowSpan="2" VerticalAlignment="Bottom" Margin="10" Orientation="Horizontal"
                      Spacing="20">
            <TextBlock Text="Select a device" VerticalAlignment="Center" />
            <ComboBox Name="Ports" ItemsSource="{Binding Ports}" SelectedItem="{Binding SelectedPort}"
                      MinWidth="70" />
            <Button Command="{Binding LoadDeviceInformation}">
              <heroIcons:HeroIcon Foreground="{Binding IconColor}" Type="ArrowPath" Width="16" Height="16" />
            </Button>
            <Button Content="{Binding ConnectButtonText}"
                    Command="{Binding ConnectAndGetBaseInfoCommand}" />
            <ToggleButton Grid.Row="0" Grid.Column="2"
                    Command="{Binding ShowMessagesCommand}">
              <heroIcons:HeroIcon Foreground="{Binding IconColor}" Type="DocumentText" Width="16" Height="16" />
            </ToggleButton>
          </StackPanel>
          <Grid Grid.Row="0" Grid.Column="1" ColumnDefinitions="25,25,30,*" RowDefinitions="*,*,*"
                Margin="20, 0, 0, 0" IsVisible="{Binding Connected}">
            <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4" VerticalAlignment="Center"
                       HorizontalAlignment="Left" Text="{Binding DeviceName}" FontWeight="Bold"
                       FontSize="24" />
            <TextBlock Grid.Row="1" Grid.Column="0" Text="Hw " VerticalAlignment="Bottom" />
            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding HardwareVersion}" FontWeight="Bold"
                       VerticalAlignment="Bottom" />
            <TextBlock Grid.Row="2" Grid.Column="0" Text="Fw " VerticalAlignment="Top" />
            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding FirmwareVersion}" FontWeight="Bold"
                       VerticalAlignment="Top" />
            <TextBlock Grid.Row="1" Grid.Column="2" Grid.RowSpan="2" Text="S/N " VerticalAlignment="Center" />
            <TextBlock Grid.Row="1" Grid.Column="3" Grid.RowSpan="2" Text="{Binding SerialNumber}"
                       FontWeight="Bold" VerticalAlignment="Center" />
          </Grid>
        </Grid>
        <StackPanel>
          <TabControl Margin="10,0,0,10">
            <TabItem Header="Configuration">
              <ScrollViewer>
                <Grid Margin="10,10,0,10" ColumnDefinitions="Auto,Auto,Auto,Auto" RowDefinitions="*,*,*,*">
                  <TextBlock Grid.Row="0" Grid.Column="0" Text="Events" FontSize="16" FontWeight="SemiBold" />
                  <TextBlock Grid.Row="0" Grid.Column="1" Text="Others" FontSize="16" FontWeight="SemiBold" />

                  <!-- Events Column -->
                  <StackPanel Grid.Row="1" Grid.Column="0" Spacing="5" Margin="0,10,20,0">
                    <!-- Register: EnableEvents (Write) -->
                    <StackPanel Orientation="Vertical" Spacing="10">
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">Enable Events</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Specifies the active events in the device.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <CheckBox IsChecked="{Binding IsLoadCellDataEnabled}" IsEnabled="True"/>
                        <Label VerticalAlignment="Center">Enable LoadCell Data</Label>
                      </StackPanel>
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <CheckBox IsChecked="{Binding IsDigitalInputEnabled}" IsEnabled="True"/>
                        <Label VerticalAlignment="Center">Enable Digital Input</Label>
                      </StackPanel>
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <CheckBox IsChecked="{Binding IsSyncOutputEnabled}" IsEnabled="True"/>
                        <Label VerticalAlignment="Center">Enable Sync Output</Label>
                      </StackPanel>
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <CheckBox IsChecked="{Binding IsThresholdsEnabled}" IsEnabled="True"/>
                        <Label VerticalAlignment="Center">Enable Thresholds</Label>
                      </StackPanel>
                    </StackPanel>
                  </StackPanel>


                  <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,0,0,0">

                    <!-- Register: AcquisitionState (Write) -->
                    <StackPanel Orientation="Vertical" Spacing="5" Margin="0,10,0,20">
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">Acquisition State</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Enables the data acquisition.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <CheckBox IsChecked="{Binding AcquisitionState,
                  Mode=TwoWay,
                  Converter={StaticResource EnableFlagConverter},
                  ConverterParameter='EnableFlag'}"
                              Content="Enable"
                              IsEnabled="True"
                              HorizontalAlignment="Left" />
                    </StackPanel>

                    <!-- Register: DO0PulseWidth (Write) -->
                    <StackPanel Orientation="Vertical" Spacing="5" Margin="0,0,0,20">
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">DO0 Pulse Width</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Pulse duration (ms) for the digital output pin 0. The pulse will only be emitted when DO0Sync == Pulse.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <NumericUpDown Value="{Binding DO0PulseWidth}"
                                   Minimum="1"
                                   Maximum="255"
                                   Increment="1"
                                   FormatString="F0"
                                   Width="200"
                                   HorizontalAlignment="Left"
                                   Margin="0,5,0,0" />
                    </StackPanel>
                    <!-- Register: DO0Sync (Write) -->
                    <StackPanel Orientation="Vertical" Spacing="5" Margin="0,0,0,20">
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">DO0 Sync</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Configuration of the digital output pin 0.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <ComboBox SelectedItem="{Binding DO0Sync, Mode=TwoWay}"
                                IsEnabled="True"
                                Width="200"
                                Margin="0,5,0,0"
                                HorizontalAlignment="Left">
                        <ComboBox.Resources>
                          <conv:EnumDisplayConverter x:Key="EnumDisplayConverter">
                            <conv:EnumDisplayConverter.Mappings>
                              <system:String x:Key="None">Controlled by software</system:String>
                              <system:String x:Key="Heartbeat">Toggles each second during acquisition</system:String>
                              <system:String x:Key="Pulse">Generates a pulse</system:String>
                            </conv:EnumDisplayConverter.Mappings>
                          </conv:EnumDisplayConverter>
                        </ComboBox.Resources>
                        <ComboBox.ItemTemplate>
                          <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource EnumDisplayConverter}}" />
                          </DataTemplate>
                        </ComboBox.ItemTemplate>
                        <x:Static Member="local:SyncConfig.None" />
                        <x:Static Member="local:SyncConfig.Heartbeat" />
                        <x:Static Member="local:SyncConfig.Pulse" />
                      </ComboBox>
                    </StackPanel>
                    <!-- Register: DI0Trigger (Write) -->
                    <StackPanel Orientation="Vertical" Spacing="5" Margin="0,0,0,20">
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">DI0 Trigger</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Configuration of the digital input pin 0.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <ComboBox SelectedItem="{Binding DI0Trigger, Mode=TwoWay}"
                                IsEnabled="True"
                                Width="200"
                                Margin="0,5,0,0"
                                HorizontalAlignment="Left">
                        <ComboBox.Resources>
                          <conv:EnumDisplayConverter x:Key="EnumDisplayConverter">
                            <conv:EnumDisplayConverter.Mappings>
                              <system:String x:Key="None">Pure digital input</system:String>
                              <system:String x:Key="RisingEdge">Start acquisition on a rising edge</system:String>
                              <system:String x:Key="FallingEdge">Start acquisition on a falling edge</system:String>
                            </conv:EnumDisplayConverter.Mappings>
                          </conv:EnumDisplayConverter>
                        </ComboBox.Resources>
                        <ComboBox.ItemTemplate>
                          <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource EnumDisplayConverter}}" />
                          </DataTemplate>
                        </ComboBox.ItemTemplate>
                        <x:Static Member="local:TriggerConfig.None" />
                        <x:Static Member="local:TriggerConfig.RisingEdge" />
                        <x:Static Member="local:TriggerConfig.FallingEdge" />
                      </ComboBox>
                    </StackPanel>
                    <!-- Register: DigitalInputState (Read-Only, Event) -->
                    <StackPanel Orientation="Vertical" Spacing="5" Margin="0,0,0,20">
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">Digital Input State</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Status of the digital input pin 0. An event will be emitted when DI0Trigger == None.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <controls:VisualStatus Status="{Binding IsDI0Enabled_DigitalInputState}"
                                              Width="15" Height="15" />
                        <TextBlock Text="DI0" VerticalAlignment="Center"/>
                      </StackPanel>
                    </StackPanel>

                    <!-- Register: SyncOutputState (Read-Only, Event) -->
                    <StackPanel Orientation="Vertical" Spacing="5" Margin="0,0,0,20">
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">Sync Output State</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Status of the digital output pin 0. An periodic event will be emitted when DO0Sync == ToggleEachSecond.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <StackPanel Orientation="Horizontal" Spacing="5">
                        <controls:VisualStatus Status="{Binding IsDO0Enabled_SyncOutputState}"
                                              Width="15" Height="15" />
                        <TextBlock Text="DO0" VerticalAlignment="Center"/>
                      </StackPanel>
                    </StackPanel>
                  </StackPanel>


                  <!-- Digital Outputs Grid Overview -->
                  <StackPanel Grid.Row="1" Grid.Column="2" Margin="30,10,0,0">
                    <Grid ColumnDefinitions="Auto,150,170,170,170,Auto,"
                          RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">
                      <!-- Header Row -->
                      <TextBlock Grid.Row="0" Grid.Column="0" Text="DO" FontWeight="Bold" Margin="0,0,20,10"/>
                      <StackPanel Orientation="Horizontal" Spacing="5" Grid.Row="0" Grid.Column="1" Margin="0,0,20,10">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">Target LoadCell</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Target Load Cell that will be used to trigger a threshold event on the DO pin.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <!-- DO1Threshold -->
                      <StackPanel Orientation="Horizontal" Spacing="5" Grid.Row="0" Grid.Column="2" Margin="0,0,20,10">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">Threshold</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Value used to threshold a Load Cell read, and trigger the DO pin.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <!-- DO1TimeAboveThreshold -->
                      <StackPanel Orientation="Horizontal" Spacing="5" Grid.Row="0" Grid.Column="3" Margin="0,0,20,10">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">Time Above</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Time (ms) above threshold value that is required to trigger the DO pin event.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <!-- DO1TimeBelowThreshold -->
                      <StackPanel Orientation="Horizontal" Spacing="5" Grid.Row="0" Grid.Column="4">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">Time Below</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Time (ms) below threshold value that is required to trigger the DO pin event.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <!-- DigitalOutputState -->
                      <StackPanel Orientation="Horizontal" Spacing="5" Grid.Row="0" Grid.Column="5">
                        <Label FontWeight="Bold" FontSize="14" Padding="0">State</Label>
                        <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                            Foreground="{Binding IconColor}"
                                            VerticalAlignment="Top">
                          <ToolTip.Tip>Write the state of all digital output lines. An event will be emitted when the value of any pin was changed by a threshold event.</ToolTip.Tip>
                        </heroIcons:HeroIcon>
                      </StackPanel>
                      <!-- DO1 -->
                      <TextBlock Grid.Row="1" Grid.Column="0" Text="DO1" Margin="0,4" VerticalAlignment="Center"/>
                      <ComboBox Grid.Row="1" Grid.Column="1" SelectedItem="{Binding DO1TargetLoadCell}" Width="120" Margin="0,4">
                        <x:Static Member="local:LoadCellChannel.Channel0" />
                        <x:Static Member="local:LoadCellChannel.Channel1" />
                        <x:Static Member="local:LoadCellChannel.Channel2" />
                        <x:Static Member="local:LoadCellChannel.Channel3" />
                        <x:Static Member="local:LoadCellChannel.Channel4" />
                        <x:Static Member="local:LoadCellChannel.Channel5" />
                        <x:Static Member="local:LoadCellChannel.Channel6" />
                        <x:Static Member="local:LoadCellChannel.Channel7" />
                        <x:Static Member="local:LoadCellChannel.None" />
                      </ComboBox>
                      <NumericUpDown Grid.Row="1" Grid.Column="2" Value="{Binding DO1Threshold}" Minimum="-32768" Maximum="32767" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="1" Grid.Column="3" Value="{Binding DO1TimeAboveThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="1" Grid.Column="4" Value="{Binding DO1TimeBelowThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <CheckBox Grid.Row="1" Grid.Column="5" IsChecked="{Binding IsDO1Enabled_DigitalOutputState}" HorizontalAlignment="Center" Margin="0,4"/>
                      <!-- DO2 -->
                      <TextBlock Grid.Row="2" Grid.Column="0" Text="DO2" Margin="0,4" VerticalAlignment="Center"/>
                      <ComboBox Grid.Row="2" Grid.Column="1" SelectedItem="{Binding DO2TargetLoadCell}" Width="120" Margin="0,4">
                        <x:Static Member="local:LoadCellChannel.Channel0" />
                        <x:Static Member="local:LoadCellChannel.Channel1" />
                        <x:Static Member="local:LoadCellChannel.Channel2" />
                        <x:Static Member="local:LoadCellChannel.Channel3" />
                        <x:Static Member="local:LoadCellChannel.Channel4" />
                        <x:Static Member="local:LoadCellChannel.Channel5" />
                        <x:Static Member="local:LoadCellChannel.Channel6" />
                        <x:Static Member="local:LoadCellChannel.Channel7" />
                        <x:Static Member="local:LoadCellChannel.None" />
                      </ComboBox>
                      <NumericUpDown Grid.Row="2" Grid.Column="2" Value="{Binding DO2Threshold}" Minimum="-32768" Maximum="32767" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="2" Grid.Column="3" Value="{Binding DO2TimeAboveThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="2" Grid.Column="4" Value="{Binding DO2TimeBelowThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <CheckBox Grid.Row="2" Grid.Column="5" IsChecked="{Binding IsDO2Enabled_DigitalOutputState}" HorizontalAlignment="Center"/>
                      <!-- DO3 -->
                      <TextBlock Grid.Row="3" Grid.Column="0" Text="DO3" Margin="0,4" VerticalAlignment="Center"/>
                      <ComboBox Grid.Row="3" Grid.Column="1" SelectedItem="{Binding DO3TargetLoadCell}" Width="120" Margin="0,4">
                        <x:Static Member="local:LoadCellChannel.Channel0" />
                        <x:Static Member="local:LoadCellChannel.Channel1" />
                        <x:Static Member="local:LoadCellChannel.Channel2" />
                        <x:Static Member="local:LoadCellChannel.Channel3" />
                        <x:Static Member="local:LoadCellChannel.Channel4" />
                        <x:Static Member="local:LoadCellChannel.Channel5" />
                        <x:Static Member="local:LoadCellChannel.Channel6" />
                        <x:Static Member="local:LoadCellChannel.Channel7" />
                        <x:Static Member="local:LoadCellChannel.None" />
                      </ComboBox>
                      <NumericUpDown Grid.Row="3" Grid.Column="2" Value="{Binding DO3Threshold}" Minimum="-32768" Maximum="32767" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="3" Grid.Column="3" Value="{Binding DO3TimeAboveThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="3" Grid.Column="4" Value="{Binding DO3TimeBelowThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <CheckBox Grid.Row="3" Grid.Column="5" IsChecked="{Binding IsDO3Enabled_DigitalOutputState}" HorizontalAlignment="Center" Margin="0,4"/>
                      <!-- DO4 -->
                      <TextBlock Grid.Row="4" Grid.Column="0" Text="DO4" Margin="0,4" VerticalAlignment="Center"/>
                      <ComboBox Grid.Row="4" Grid.Column="1" SelectedItem="{Binding DO4TargetLoadCell}" Width="120" Margin="0,4">
                        <x:Static Member="local:LoadCellChannel.Channel0" />
                        <x:Static Member="local:LoadCellChannel.Channel1" />
                        <x:Static Member="local:LoadCellChannel.Channel2" />
                        <x:Static Member="local:LoadCellChannel.Channel3" />
                        <x:Static Member="local:LoadCellChannel.Channel4" />
                        <x:Static Member="local:LoadCellChannel.Channel5" />
                        <x:Static Member="local:LoadCellChannel.Channel6" />
                        <x:Static Member="local:LoadCellChannel.Channel7" />
                        <x:Static Member="local:LoadCellChannel.None" />
                      </ComboBox>
                      <NumericUpDown Grid.Row="4" Grid.Column="2" Value="{Binding DO4Threshold}" Minimum="-32768" Maximum="32767" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="4" Grid.Column="3" Value="{Binding DO4TimeAboveThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="4" Grid.Column="4" Value="{Binding DO4TimeBelowThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <CheckBox Grid.Row="4" Grid.Column="5" IsChecked="{Binding IsDO4Enabled_DigitalOutputState}" HorizontalAlignment="Center" Margin="0,4"/>
                      <!-- DO5 -->
                      <TextBlock Grid.Row="5" Grid.Column="0" Text="DO5" Margin="0,4" VerticalAlignment="Center"/>
                      <ComboBox Grid.Row="5" Grid.Column="1" SelectedItem="{Binding DO5TargetLoadCell}" Width="120" Margin="0,4">
                        <x:Static Member="local:LoadCellChannel.Channel0" />
                        <x:Static Member="local:LoadCellChannel.Channel1" />
                        <x:Static Member="local:LoadCellChannel.Channel2" />
                        <x:Static Member="local:LoadCellChannel.Channel3" />
                        <x:Static Member="local:LoadCellChannel.Channel4" />
                        <x:Static Member="local:LoadCellChannel.Channel5" />
                        <x:Static Member="local:LoadCellChannel.Channel6" />
                        <x:Static Member="local:LoadCellChannel.Channel7" />
                        <x:Static Member="local:LoadCellChannel.None" />
                      </ComboBox>
                      <NumericUpDown Grid.Row="5" Grid.Column="2" Value="{Binding DO5Threshold}" Minimum="-32768" Maximum="32767" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="5" Grid.Column="3" Value="{Binding DO5TimeAboveThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="5" Grid.Column="4" Value="{Binding DO5TimeBelowThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <CheckBox Grid.Row="5" Grid.Column="5" IsChecked="{Binding IsDO5Enabled_DigitalOutputState}" HorizontalAlignment="Center" Margin="0,4"/>
                      <!-- DO6 -->
                      <TextBlock Grid.Row="6" Grid.Column="0" Text="DO6" Margin="0,4" VerticalAlignment="Center"/>
                      <ComboBox Grid.Row="6" Grid.Column="1" SelectedItem="{Binding DO6TargetLoadCell}" Width="120" Margin="0,4">
                        <x:Static Member="local:LoadCellChannel.Channel0" />
                        <x:Static Member="local:LoadCellChannel.Channel1" />
                        <x:Static Member="local:LoadCellChannel.Channel2" />
                        <x:Static Member="local:LoadCellChannel.Channel3" />
                        <x:Static Member="local:LoadCellChannel.Channel4" />
                        <x:Static Member="local:LoadCellChannel.Channel5" />
                        <x:Static Member="local:LoadCellChannel.Channel6" />
                        <x:Static Member="local:LoadCellChannel.Channel7" />
                        <x:Static Member="local:LoadCellChannel.None" />
                      </ComboBox>
                      <NumericUpDown Grid.Row="6" Grid.Column="2" Value="{Binding DO6Threshold}" Minimum="-32768" Maximum="32767" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="6" Grid.Column="3" Value="{Binding DO6TimeAboveThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="6" Grid.Column="4" Value="{Binding DO6TimeBelowThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <CheckBox Grid.Row="6" Grid.Column="5" IsChecked="{Binding IsDO6Enabled_DigitalOutputState}" HorizontalAlignment="Center" Margin="0,4"/>
                      <!-- DO7 -->
                      <TextBlock Grid.Row="7" Grid.Column="0" Text="DO7" Margin="0,4" VerticalAlignment="Center"/>
                      <ComboBox Grid.Row="7" Grid.Column="1" SelectedItem="{Binding DO7TargetLoadCell}" Width="120" Margin="0,4">
                        <x:Static Member="local:LoadCellChannel.Channel0" />
                        <x:Static Member="local:LoadCellChannel.Channel1" />
                        <x:Static Member="local:LoadCellChannel.Channel2" />
                        <x:Static Member="local:LoadCellChannel.Channel3" />
                        <x:Static Member="local:LoadCellChannel.Channel4" />
                        <x:Static Member="local:LoadCellChannel.Channel5" />
                        <x:Static Member="local:LoadCellChannel.Channel6" />
                        <x:Static Member="local:LoadCellChannel.Channel7" />
                        <x:Static Member="local:LoadCellChannel.None" />
                      </ComboBox>
                      <NumericUpDown Grid.Row="7" Grid.Column="2" Value="{Binding DO7Threshold}" Minimum="-32768" Maximum="32768" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="7" Grid.Column="3" Value="{Binding DO7TimeAboveThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="7" Grid.Column="4" Value="{Binding DO7TimeBelowThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <CheckBox Grid.Row="7" Grid.Column="5" IsChecked="{Binding IsDO7Enabled_DigitalOutputState}" HorizontalAlignment="Center" Margin="0,4"/>
                      <!-- DO8 -->
                      <TextBlock Grid.Row="8" Grid.Column="0" Text="DO8" Margin="0,4" VerticalAlignment="Center"/>
                      <ComboBox Grid.Row="8" Grid.Column="1" SelectedItem="{Binding DO8TargetLoadCell}" Width="120" Margin="0,4">
                        <x:Static Member="local:LoadCellChannel.Channel0" />
                        <x:Static Member="local:LoadCellChannel.Channel1" />
                        <x:Static Member="local:LoadCellChannel.Channel2" />
                        <x:Static Member="local:LoadCellChannel.Channel3" />
                        <x:Static Member="local:LoadCellChannel.Channel4" />
                        <x:Static Member="local:LoadCellChannel.Channel5" />
                        <x:Static Member="local:LoadCellChannel.Channel6" />
                        <x:Static Member="local:LoadCellChannel.Channel7" />
                        <x:Static Member="local:LoadCellChannel.None" />
                      </ComboBox>
                      <NumericUpDown Grid.Row="8" Grid.Column="2" Value="{Binding DO8Threshold}" Minimum="-32768" Maximum="32767" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="8" Grid.Column="3" Value="{Binding DO8TimeAboveThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <NumericUpDown Grid.Row="8" Grid.Column="4" Value="{Binding DO8TimeBelowThreshold}" Minimum="0" Maximum="65535" Increment="1" FormatString="F0" Width="150" Margin="0,4" HorizontalAlignment="Left" ClipValueToMinMax="True"/>
                      <CheckBox Grid.Row="8" Grid.Column="5" IsChecked="{Binding IsDO8Enabled_DigitalOutputState}" HorizontalAlignment="Center" Margin="0,4" />
                    </Grid>
                    <StackPanel Margin="0,10,0,0" MaxWidth="750">
                      <TextBlock TextWrapping="Wrap" FontSize="14" Margin="0,8,0,0">
                        <Run FontWeight="Bold">Notes:</Run>
                      </TextBlock>
                      <StackPanel Margin="16,4,0,0">
                        <StackPanel Orientation="Horizontal">
                          <TextBlock Text="• " FontSize="14" Margin="0,0,4,0"/>
                          <TextBlock Text="Time in milliseconds." FontSize="14"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                          <TextBlock Text="• " FontSize="14" Margin="0,0,4,0"/>
                          <TextBlock Text="For the configured time, a deterministic processing delay equal to 500 microseconds is added." FontSize="14"/>
                        </StackPanel>
                      </StackPanel>

                    </StackPanel>
                  </StackPanel>
                  <!-- Message Control -->
                  <StackPanel Grid.Row="0" Grid.Column="6" Grid.RowSpan="2">
                    <controls:WriteMessagesControl MinWidth="400" IsVisible="{Binding ShowWriteMessages}" />
                  </StackPanel>

                </Grid>
              </ScrollViewer>
            </TabItem>
            <TabItem Header="Analysis">
              <!-- Register: LoadCellData and Offsets Table -->
              <Grid ColumnDefinitions="Auto,Auto,Auto">
                <!-- Data/Offset/Show Table on the left -->
                <StackPanel Grid.Column="0" Orientation="Vertical" Spacing="10">
                  <StackPanel Orientation="Horizontal" Spacing="10">
                    <Label FontWeight="SemiBold" FontSize="16" Padding="5">Data and Offsets</Label>
                  </StackPanel>
                  <Grid ColumnDefinitions="100,100,170,Auto" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">
                    <!-- Header -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="" FontWeight="Bold" Margin="0,0,20,0"/>
                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,20,0" Spacing="4">
                      <TextBlock Text="Value" FontWeight="Bold"/>
                      <heroIcons:HeroIcon Type="InformationCircle" Width="14" Height="14"
                                          Foreground="{Binding IconColor}"
                                          VerticalAlignment="Center">
                        <ToolTip.Tip>Value of single ADC read from all load cell channels.</ToolTip.Tip>
                      </heroIcons:HeroIcon>
                    </StackPanel>
                    <TextBlock Grid.Row="0" Grid.Column="2" Text="Offset" FontWeight="Bold" Margin="0,0,20,0"/>
                    <TextBlock Grid.Row="0" Grid.Column="3" Text="Visualize" FontWeight="Bold"/>
                    <!-- Channel rows (0-7) -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Channel 0:" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <TextBlock Grid.Row="1" Grid.Column="1"
                               Text="{Binding LoadCellData, Converter={StaticResource PayloadFieldConverter}, ConverterParameter='Channel0'}"
                               VerticalAlignment="Center" Margin="0,5,10,5" FontSize="14"/>
                    <NumericUpDown Grid.Row="1" Grid.Column="2" Value="{Binding OffsetLoadCell0}" Minimum="-255" Maximum="255" Increment="1" FormatString="F0" Width="150" Margin="0,5,0,5" HorizontalAlignment="Left"/>
                    <StackPanel Grid.Row="1" Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                      <Rectangle Width="20" Height="4" Fill="Blue" VerticalAlignment="Center"/>
                      <CheckBox IsChecked="{Binding Show0}" Margin="8,0,0,0"/>
                    </StackPanel>
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Channel 1:" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <TextBlock Grid.Row="2" Grid.Column="1"
                               Text="{Binding LoadCellData, Converter={StaticResource PayloadFieldConverter}, ConverterParameter='Channel1'}"
                               VerticalAlignment="Center" Margin="0,5,10,5" FontSize="14"/>
                    <NumericUpDown Grid.Row="2" Grid.Column="2" Value="{Binding OffsetLoadCell1}" Minimum="-255" Maximum="255" Increment="1" FormatString="F0" Width="150" Margin="0,5,0,5" HorizontalAlignment="Left"/>
                    <StackPanel Grid.Row="2" Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                      <Rectangle Width="20" Height="4" Fill="Red" VerticalAlignment="Center"/>
                      <CheckBox IsChecked="{Binding Show1}" Margin="8,0,0,0"/>
                    </StackPanel>
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Channel 2:" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <TextBlock Grid.Row="3" Grid.Column="1"
                               Text="{Binding LoadCellData, Converter={StaticResource PayloadFieldConverter}, ConverterParameter='Channel2'}"
                               VerticalAlignment="Center" Margin="0,5,10,5" FontSize="14"/>
                    <NumericUpDown Grid.Row="3" Grid.Column="2" Value="{Binding OffsetLoadCell2}" Minimum="-255" Maximum="255" Increment="1" FormatString="F0" Width="150" Margin="0,5,0,5" HorizontalAlignment="Left"/>
                    <StackPanel Grid.Row="3" Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                      <Rectangle Width="20" Height="4" Fill="Green" VerticalAlignment="Center"/>
                      <CheckBox IsChecked="{Binding Show2}" Margin="8,0,0,0"/>
                    </StackPanel>
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Channel 3:" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <TextBlock Grid.Row="4" Grid.Column="1"
                               Text="{Binding LoadCellData, Converter={StaticResource PayloadFieldConverter}, ConverterParameter='Channel3'}"
                               VerticalAlignment="Center" Margin="0,5,10,5" FontSize="14"/>
                    <NumericUpDown Grid.Row="4" Grid.Column="2" Value="{Binding OffsetLoadCell3}" Minimum="-255" Maximum="255" Increment="1" FormatString="F0" Width="150" Margin="0,5,0,5" HorizontalAlignment="Left"/>
                    <StackPanel Grid.Row="4" Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                      <Rectangle Width="20" Height="4" Fill="Orange" VerticalAlignment="Center"/>
                      <CheckBox IsChecked="{Binding Show3}" Margin="8,0,0,0"/>
                    </StackPanel>
                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Channel 4:" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <TextBlock Grid.Row="5" Grid.Column="1"
                               Text="{Binding LoadCellData, Converter={StaticResource PayloadFieldConverter}, ConverterParameter='Channel4'}"
                               VerticalAlignment="Center" Margin="0,5,10,5" FontSize="14"/>
                    <NumericUpDown Grid.Row="5" Grid.Column="2" Value="{Binding OffsetLoadCell4}" Minimum="-255" Maximum="255" Increment="1" FormatString="F0" Width="150" Margin="0,5,0,5" HorizontalAlignment="Left"/>
                    <StackPanel Grid.Row="5" Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                      <Rectangle Width="20" Height="4" Fill="Purple" VerticalAlignment="Center"/>
                      <CheckBox IsChecked="{Binding Show4}" Margin="8,0,0,0"/>
                    </StackPanel>
                    <TextBlock Grid.Row="6" Grid.Column="0" Text="Channel 5:" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <TextBlock Grid.Row="6" Grid.Column="1"
                               Text="{Binding LoadCellData, Converter={StaticResource PayloadFieldConverter}, ConverterParameter='Channel5'}"
                               VerticalAlignment="Center" Margin="0,5,10,5" FontSize="14"/>
                    <NumericUpDown Grid.Row="6" Grid.Column="2" Value="{Binding OffsetLoadCell5}" Minimum="-255" Maximum="255" Increment="1" FormatString="F0" Width="150" Margin="0,5,0,5" HorizontalAlignment="Left"/>
                    <StackPanel Grid.Row="6" Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                      <Rectangle Width="20" Height="4" Fill="Brown" VerticalAlignment="Center"/>
                      <CheckBox IsChecked="{Binding Show5}" Margin="8,0,0,0"/>
                    </StackPanel>
                    <TextBlock Grid.Row="7" Grid.Column="0" Text="Channel 6:" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <TextBlock Grid.Row="7" Grid.Column="1"
                               Text="{Binding LoadCellData, Converter={StaticResource PayloadFieldConverter}, ConverterParameter='Channel6'}"
                               VerticalAlignment="Center" Margin="0,5,10,5" FontSize="14"/>
                    <NumericUpDown Grid.Row="7" Grid.Column="2" Value="{Binding OffsetLoadCell6}" Minimum="-255" Maximum="255" Increment="1" FormatString="F0" Width="150" Margin="0,5,0,5" HorizontalAlignment="Left"/>
                    <StackPanel Grid.Row="7" Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                      <Rectangle Width="20" Height="4" Fill="Cyan" VerticalAlignment="Center"/>
                      <CheckBox IsChecked="{Binding Show6}" Margin="8,0,0,0"/>
                    </StackPanel>
                    <TextBlock Grid.Row="8" Grid.Column="0" Text="Channel 7:" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <TextBlock Grid.Row="8" Grid.Column="1"
                               Text="{Binding LoadCellData, Converter={StaticResource PayloadFieldConverter}, ConverterParameter='Channel7'}"
                               VerticalAlignment="Center" Margin="0,5,10,5" FontSize="14"/>
                    <NumericUpDown Grid.Row="8" Grid.Column="2" Value="{Binding OffsetLoadCell7}" Minimum="-255" Maximum="255" Increment="1" FormatString="F0" Width="150" Margin="0,5,0,5" HorizontalAlignment="Left"/>
                    <StackPanel Grid.Row="8" Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                      <Rectangle Width="20" Height="4" Fill="Magenta" VerticalAlignment="Center"/>
                      <CheckBox IsChecked="{Binding Show7}" Margin="8,0,0,0"/>
                    </StackPanel>
                  </Grid>
                </StackPanel>
                <!-- Spacer -->
                <Border Grid.Column="1"/>
                <!-- Chart on the right -->
                <lvc:CartesianChart
                    Grid.Column="2"
                    SyncContext="{Binding SyncChart}"
                    Series="{Binding Series}"
                    XAxes="{Binding XAxes}"
                    Height="400"
                    Width="850"
                    Margin="20,0,0,0"/>
              </Grid>
            </TabItem>
          </TabControl>
        </StackPanel>
      </StackPanel>
    </ScrollViewer>
  </DockPanel>
</UserControl>
